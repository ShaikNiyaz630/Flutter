Question 16: Develop a Flutter application that includes a TextFormField for user input. The data entered into the TextFormField should be persistently stored in local storage. When the user reopens the app, the previously entered text should be displayed in the TextFormField.
Source Code :
import 'package:flutter/material.dart';
import 'package:shared_preferences/shared_preferences.dart';

void main() {
  runApp(const MyApp());
}

class MyApp extends StatelessWidget {
  const MyApp({super.key});

  @override
  Widget build(BuildContext context) {
    return const MaterialApp(
      debugShowCheckedModeBanner: false,
      home: PersistentTextForm(),
    );
  }
}

class PersistentTextForm extends StatefulWidget {
  const PersistentTextForm({super.key});

  @override
  State<PersistentTextForm> createState() => _PersistentTextFormState();
}

class _PersistentTextFormState extends State<PersistentTextForm> {
  final TextEditingController _controller = TextEditingController();
  late SharedPreferences _prefs;

  @override
  void initState() {
    super.initState();
    _loadSavedText();
  }

  // Load saved text from SharedPreferences
  Future<void> _loadSavedText() async {
    _prefs = await SharedPreferences.getInstance();
    String? savedText = _prefs.getString('userInput');
    if (savedText != null) {
      _controller.text = savedText;
    }
  }

  // Save text to SharedPreferences
  Future<void> _saveText(String value) async {
    await _prefs.setString('userInput', value);
  }

  @override
  Widget build(BuildContext context) {
    return Scaffold(
      appBar: AppBar(title: const Text('Persistent TextFormField')),
      body: Padding(
        padding: const EdgeInsets.all(16.0),
        child: Column(
          children: [
            TextFormField(
              controller: _controller,
              decoration: const InputDecoration(
                labelText: 'Enter some text',
                border: OutlineInputBorder(),
              ),
              onChanged: (value) {
                _saveText(value); // Save text whenever it changes
              },
            ),
            const SizedBox(height: 20),
            ElevatedButton(
              onPressed: () {
                ScaffoldMessenger.of(context).showSnackBar(
                  SnackBar(content: Text('Saved: ${_controller.text}')),
                );
              },
              child: const Text('Show Saved Text'),
            ),
          ],
        ),
      ),
    );
  }
}

